{
  "namespaces": {
    "mdb": "http://standards.iso.org/iso/19115/-3/mdb/2.0",
    "xsi": "http://www.w3.org/2001/XMLSchema-instance",
    "cat": "http://standards.iso.org/iso/19115/-3/cat/1.0",
    "gfc": "http://standards.iso.org/iso/19110/gfc/1.1",
    "cit": "http://standards.iso.org/iso/19115/-3/cit/2.0",
    "gcx": "http://standards.iso.org/iso/19115/-3/gcx/1.0",
    "gex": "http://standards.iso.org/iso/19115/-3/gex/1.0",
    "lan": "http://standards.iso.org/iso/19115/-3/lan/1.0",
    "srv": "http://standards.iso.org/iso/19115/-3/srv/2.0",
    "mas": "http://standards.iso.org/iso/19115/-3/mas/1.0",
    "mcc": "http://standards.iso.org/iso/19115/-3/mcc/1.0",
    "mco": "http://standards.iso.org/iso/19115/-3/mco/1.0",
    "mda": "http://standards.iso.org/iso/19115/-3/mda/2.0",
    "mds": "http://standards.iso.org/iso/19115/-3/mds/2.0",
    "mdt": "http://standards.iso.org/iso/19115/-3/mdt/2.0",
    "mex": "http://standards.iso.org/iso/19115/-3/mex/1.0",
    "mmi": "http://standards.iso.org/iso/19115/-3/mmi/1.0",
    "mpc": "http://standards.iso.org/iso/19115/-3/mpc/1.0",
    "mrc": "http://standards.iso.org/iso/19115/-3/mrc/1.0",
    "mrd": "http://standards.iso.org/iso/19115/-3/mrd/1.0",
    "mri": "http://standards.iso.org/iso/19115/-3/mri/1.0",
    "mrl": "http://standards.iso.org/iso/19115/-3/mrl/2.0",
    "mrs": "http://standards.iso.org/iso/19115/-3/mrs/1.0",
    "msr": "http://standards.iso.org/iso/19115/-3/msr/2.0",
    "mdq": "http://standards.iso.org/iso/19157/-2/mdq/1.0",
    "mac": "http://standards.iso.org/iso/19115/-3/mac/2.0",
    "gco": "http://standards.iso.org/iso/19115/-3/gco/1.0",
    "gml": "http://www.opengis.net/gml/3.2",
    "xlink": "http://www.w3.org/1999/xlink"
  },
  "xpath": "/mdb:MD_Metadata",
  "postprocess": {
    "function": "prune_if_empty"
  },
  "type": "object",
  "properties": {
    "fileIdentifier": {
      "xpath": "mdb:metadataIdentifier/mcc:MD_Identifier/mcc:code",
      "valueChild": "gco:CharacterString",
      "keep": false,
      "exportTo": {
        "xpath": "mdb:metadataLinkage/cit:CI_OnlineResource/cit:linkage/gco:CharacterString",
        "attributes": {
          "text": {
            "function": "geonetwork_url"
          }
        }
      }
    },
    "identificationInfo": {
      "xpath": "mdb:identificationInfo/mri:MD_DataIdentification",
      "rules": [
        "maintFreq",
        "endPosition",
        {
          "dateOrder": {
            "field0": "beginPosition",
            "field1": "endPosition"
          }
        }
      ],
      "type": "object",
      "properties": {
        "title": {
          "!docstring": "ID1",
          "xpath": "mri:citation/cit:CI_Citation/cit:title",
          "valueChild": "gco:CharacterString",
          "label": "Title",
          "type": "string",
          "keep": false,
          "xpath_required": true,
          "rules": [
            "requiredField"
          ]
        },
        "topicCategory": {
          "!docstring": "ID4",
          "xpath": "mri:topicCategory",
          "keep": false,
          "valueChild": "mri:MD_TopicCategoryCode",
          "label": "Topic categories",
          "attributes": {
            "text": {
              "function": "identity"
            },
            "codeListValue": {
              "function": "identity"
            }
          },
          "rules": [
            "requiredField"
          ]
        },
        "status": {
          "!docstring": "ID5",
          "xpath": "mri:status",
          "valueChild": "mcc:MD_ProgressCode",
          "label": "Status of data",
          "attributes": {
            "text": {
              "function": "identity"
            },
            "codeListValue": {
              "function": "identity"
            }
          },
          "keep": false,
          "rules": [
            "requiredField"
          ]
        },
        "maintenanceAndUpdateFrequency": {
          "xpath": "mri:resourceMaintenance/mmi:MD_MaintenanceInformation/mmi:maintenanceAndUpdateFrequency",
          "valueChild": "mmi:MD_MaintenanceFrequencyCode",
          "label": "Maintenance and update frequency",
          "attributes": {
            "codeListValue": {
              "function": "identity"
            }
          },
          "rules": [
            "requiredField"
          ]
        },
        "dateCreation": {
          "!docstring": "ID6",
          "type": "string",
          "xpath": "/mdb:MD_Metadata/mdb:dateInfo/cit:CI_Date[cit:dateType/cit:CI_DateTypeCode[@codeListValue=\"creation\"]]/cit:date/gco:DateTime",
          "xpath-q1": "/mdb:MD_Metadata/mdb:dateInfo/cit:CI_Date[cit:dateType/cit:CI_DateTypeCode[@codeListValue=\"creation\"]]/cit:date/gco:Date",
          "required": true,
          "xpath_required": true,
          "keep": false,
          "rules": [
            "requiredField"
          ]
        },
        "datePublication": {
          "!docstring": "ID8",
          "type": "string",
          "xpath": "mri:citation/cit:CI_Citation/cit:date[cit:CI_Date/cit:dateType/cit:CI_DateTypeCode[@codeListValue=\"publication\"]]",
          "valueChild": "cit:CI_Date/cit:date/gco:Date",
          "keep": false,
          "rules": [
            "requiredField"
          ]
        },
        "abstract": {
          "!docstring": "What1",
          "xpath": "mri:abstract",
          "valueChild": "gco:CharacterString",
          "label": "Abstract",
          "type": "string",
          "keep": false,
          "required": true,
          "xpath_required": true,
          "rules": [
            "requiredField"
          ]
        },
        "citedResponsibleParty": {
          "!docstring": "Who tab: Responsible for the creation of the dataset",
          "xpath": "mri:citation/cit:CI_Citation/cit:citedResponsibleParty/cit:CI_Responsibility[cit:role/cit:CI_RoleCode[not(@codeListValue=\"resourceProvider\")]]",
          "container": "mri:citation/cit:CI_Citation/cit:citedResponsibleParty[cit:CI_Responsibility/cit:role/cit:CI_RoleCode[not(@codeListValue=\"resourceProvider\")]]",
          "keep": false,
          "type": "array",
          "items": {
            "xpath": "mri:citation/cit:CI_Citation/cit:citedResponsibleParty/cit:CI_Responsibility[cit:role/cit:CI_RoleCode[not(@codeListValue=\"resourceProvider\")]]",
            "type": "object",
            "properties": {
              "role": {
                "!docstring": "Who2 / Who11",
                "type": "string",
                "xpath": "cit:role/cit:CI_RoleCode",
                "keep": false,
                "required": true,
                "xpath_required": true,
                "attributes": {
                  "codeListValue": {
                    "function": "identity"
                  }
                },
                "parser": {
                  "function": "parse_codeListValue"
                },
                "rules": [
                  "requiredField"
                ]
              },
              "organisation": {
                "xpath": "cit:party/cit:CI_Organisation",
                "type": "object",
                "properties": {
                  "name": {
                    "!docstring": "Who8 / Who12",
                    "xpath": "cit:name",
                    "valueChild": "gco:CharacterString",
                    "type": "string",
                    "required": true,
                    "keep": false
                  },
                  "uri": {
                    "!docstring": "Who8 / Who9 / Who12",
                    "xpath": "cit:partyIdentifier",
                    "valueChild": "mcc:MD_Identifier/mcc:code/gcx:Anchor",
                    "type": "string",
                    "required": false,
                    "keep": false,
                    "parser": {
                      "function": "parse_organisation_identifier"
                    },
                    "attributes": {
                      "xlink:href": {
                        "function": "separate_organisation_identifier"
                      },
                      "text": {
                        "function": "identity"
                      }
                    }
                  },
                  "address_locality": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:city",
                    "type": "string",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "address_region": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:administrativeArea",
                    "type": "string",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "postcode": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:postalCode",
                    "type": "string",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "country": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:country",
                    "type": "string",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "email": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:electronicMailAddress",
                    "type": "string",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "phone": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "TODO",
                    "keep": false,
                    "type": "string",
                    "valueChild": "gco:CharacterString"
                  },
                  "fax": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "TODO",
                    "keep": false,
                    "type": "string",
                    "valueChild": "gco:CharacterString"
                  },
                  "isUserDefined": {}
                }
              },
              "contact": {
                "!docstring": "Who3",
                "type": "object",
                "xpath": "cit:party/cit:CI_Organisation/cit:individual",
                "properties": {
                  "name": {
                    "!docstring": "Who3",
                    "xpath": "cit:CI_Individual/cit:name",
                    "valueChild": "gco:CharacterString",
                    "type": "string",
                    "keep": false,
                    "required": false,
                    "rules": [
                      "requiredField",
                      "firstCommaLast"
                    ]
                  },
                  "email": {
                    "!docstring": "Who6",
                    "xpath": "cit:CI_Individual/cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:electronicMailAddress",
                    "valueChild": "gco:CharacterString",
                    "type": "string",
                    "keep": false,
                    "required": false,
                    "rules": [
                      "requiredField"
                    ]
                  },
                  "phone": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "TODO",
                    "type": "string",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "fax": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "TODO",
                    "type": "string",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "orcid2": {
                    "!docstring": "Who7",
                    "xpath": "cit:CI_Individual/cit:contactInfo/cit:CI_Contact/cit:onlineResource",
                    "valueChild": "cit:CI_OnlineResource/cit:linkage/gco:CharacterString",
                    "type": "string",
                    "required": false,
                    "keep": false,
                    "rules": [
                      "valid-ordid-uri"
                    ]
                  },
                  "deliveryPoint": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:CI_Individual/cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:deliveryPoint[1]",
                    "valueChild": "gco:CharacterString",
                    "type": "string",
                    "keep": false
                  },
                  "deliveryPoint2": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:CI_Individual/cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:deliveryPoint[2]",
                    "type": "string",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "isUserDefined": {}
                }
              },
              "uri": {},
              "partyType": {},
              "isUserDefined": {
                "!docstring": "Fake node so we can track person status",
                "xpath": "isUserAdded",
                "default": false,
                "export": false
              }
            }
          },
          "notes": "Responsible party/ies for creating dataset"
        },
        "geographicElement": {
          "xpath": "mri:extent/gex:EX_Extent[gex:geographicElement][gex:temporalElement]",
          "type": "object",
          "rules": [
            "geographyRequired"
          ],
          "properties": {
            "hasGeographicCoverage": {
              "export": false,
              "type": "boolean"
            },
            "boxes": {
              "!docstring": "Where2",
              "xpath": "gex:geographicElement",
              "rules": [
                "requiredField"
              ],
              "keep": false,
              "type": "array",
              "items": {
                "xpath": "gex:geographicElement",
                "type": "object",
                "properties": {
                  "uri": {},
                  "isUserDefined": {},
                  "westBoundLongitude": {
                    "xpath": "gex:EX_GeographicBoundingBox/gex:westBoundLongitude/gco:Decimal",
                    "rules": [
                      "requiredField"
                    ],
                    "type": "number"
                  },
                  "eastBoundLongitude": {
                    "xpath": "gex:EX_GeographicBoundingBox/gex:eastBoundLongitude/gco:Decimal",
                    "rules": [
                      "requiredField"
                    ],
                    "type": "number"
                  },
                  "southBoundLatitude": {
                    "xpath": "gex:EX_GeographicBoundingBox/gex:southBoundLatitude/gco:Decimal",
                    "rules": [
                      "requiredField"
                    ],
                    "type": "number"
                  },
                  "northBoundLatitude": {
                    "xpath": "gex:EX_GeographicBoundingBox/gex:northBoundLatitude/gco:Decimal",
                    "rules": [
                      "requiredField"
                    ],
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "verticalElement": {
          "xpath": "mri:extent/gex:EX_Extent/gex:verticalElement/gex:EX_VerticalExtent",
          "type": "object",
          "rules": [
            "imasVerticalRequired"
          ],
          "properties": {
            "hasVerticalExtent": {
              "export": false,
              "type": "boolean"
            },
            "verticalCRS": {
              "xpath": "gex:verticalCRS",
              "valueChild": "gml:VerticalCRS",
              "type": "object",
              "keep": false,
              "properties": {
                "identifier": {
                  "xpath": "gml:identifier",
                  "type": "string"
                },
                "name": {
                  "xpath": "gml:name",
                  "type": "string"
                },
                "label": {
                  "type": "string"
                }
              }
            },
            "minimumValue": {
              "type": "number",
              "xpath": "gex:minimumValue",
              "valueChild": "gco:Real",
              "keep": false,
              "rules": [
                "positive"
              ]
            },
            "maximumValue": {
              "type": "number",
              "xpath": "gex:minimumValue",
              "valueChild": "gco:Real",
              "keep": false,
              "rules": [
                "positive"
              ]
            }
          }
        },
        "keywordsTheme": {
          "!docstring": "What3",
          "xpath1": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"theme\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://gcmd.earthdata.nasa.gov/kms/concepts/concept_scheme/sciencekeywords\"]",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"theme\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:identifier/mcc:MD_Identifier/mcc:code/gcx:Anchor)=\"geonetwork.thesaurus.external.theme.sciencekeywords\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "breadcrumb": {},
                  "label": {
                    "xpath": "gcx:Anchor"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true,
          "rules": [
            "requiredField"
          ]
        },
        "keywordsThemeExtra": {
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"theme\"]][not(mri:thesaurusName)]",
          "type": "object",
          "properties": {
            "keywords": {
              "keep": false,
              "xpath": "mri:keyword",
              "type": "array",
              "items": {
                "type": "string",
                "keep": "false",
                "xpath": "mri:keyword/gco:CharacterString"
              }
            }
          },
          "xpath_required": true
        },
        "keywordsTaxonExtra": {
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"taxon\"]]",
          "type": "object",
          "properties": {
            "keywords": {
              "keep": false,
              "xpath": "mri:keyword",
              "type": "array",
              "items": {
                "type": "string",
                "keep": "false",
                "xpath": "mri:keyword/gco:CharacterString"
              }
            }
          },
          "xpath_required": true
        },
        "beginPosition": {
          "!docstring": "When1",
          "xpath": "mri:extent/gex:EX_Extent/gex:temporalElement/gex:EX_TemporalExtent/gex:extent/gml:TimePeriod/gml:beginPosition",
          "required": true,
          "xpath_required": true,
          "keep": false,
          "type": "string",
          "rules": [
            "requiredField"
          ]
        },
        "endPosition": {
          "!docstring": "When2",
          "xpath": "mri:extent/gex:EX_Extent/gex:temporalElement/gex:EX_TemporalExtent/gex:extent/gml:TimePeriod/gml:endPosition",
          "deleteWhenEmpty": true,
          "keep": false,
          "type": "string",
          "rules": [
            "requiredField"
          ]
        }
      }
    },
    "resourceLineage": {
      "xpath": "mdb:resourceLineage/mrl:LI_Lineage",
      "type": "object",
      "properties": {
        "statement": {
          "type": "string",
          "xpath": "mrl:statement",
          "valueChild": "gco:CharacterString",
          "keep": false,
          "rules": [
            "requiredField"
          ]
        }
      }
    }
  }
}
