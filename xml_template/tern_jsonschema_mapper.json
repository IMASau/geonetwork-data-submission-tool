{
  "namespaces": {
    "mdb": "http://standards.iso.org/iso/19115/-3/mdb/2.0",
    "xsi": "http://www.w3.org/2001/XMLSchema-instance",
    "cat": "http://standards.iso.org/iso/19115/-3/cat/1.0",
    "gfc": "http://standards.iso.org/iso/19110/gfc/1.1",
    "cit": "http://standards.iso.org/iso/19115/-3/cit/2.0",
    "gcx": "http://standards.iso.org/iso/19115/-3/gcx/1.0",
    "gex": "http://standards.iso.org/iso/19115/-3/gex/1.0",
    "lan": "http://standards.iso.org/iso/19115/-3/lan/1.0",
    "srv": "http://standards.iso.org/iso/19115/-3/srv/2.0",
    "mas": "http://standards.iso.org/iso/19115/-3/mas/1.0",
    "mcc": "http://standards.iso.org/iso/19115/-3/mcc/1.0",
    "mco": "http://standards.iso.org/iso/19115/-3/mco/1.0",
    "mda": "http://standards.iso.org/iso/19115/-3/mda/2.0",
    "mds": "http://standards.iso.org/iso/19115/-3/mds/2.0",
    "mdt": "http://standards.iso.org/iso/19115/-3/mdt/2.0",
    "mex": "http://standards.iso.org/iso/19115/-3/mex/1.0",
    "mmi": "http://standards.iso.org/iso/19115/-3/mmi/1.0",
    "mpc": "http://standards.iso.org/iso/19115/-3/mpc/1.0",
    "mrc": "http://standards.iso.org/iso/19115/-3/mrc/1.0",
    "mrd": "http://standards.iso.org/iso/19115/-3/mrd/1.0",
    "mri": "http://standards.iso.org/iso/19115/-3/mri/1.0",
    "mrl": "http://standards.iso.org/iso/19115/-3/mrl/2.0",
    "mrs": "http://standards.iso.org/iso/19115/-3/mrs/1.0",
    "msr": "http://standards.iso.org/iso/19115/-3/msr/2.0",
    "mdq": "http://standards.iso.org/iso/19157/-2/mdq/1.0",
    "mac": "http://standards.iso.org/iso/19115/-3/mac/2.0",
    "gco": "http://standards.iso.org/iso/19115/-3/gco/1.0",
    "gml": "http://www.opengis.net/gml/3.2",
    "xlink": "http://www.w3.org/1999/xlink"
  },
  "xpath": "/mdb:MD_Metadata",
  "postprocess": [
    {"function": "prune_if_empty"},
    {"function": "prune_orcid_uri"}
  ],
  "type": "object",
  "properties": {
    "fileIdentifier": {
      "xpath": "mdb:metadataIdentifier/mcc:MD_Identifier/mcc:code",
      "valueChild": "gco:CharacterString",
      "exportTo": {
        "xpath": "mdb:metadataLinkage/cit:CI_OnlineResource/cit:linkage/gco:CharacterString",
        "attributes": {
          "text": {
            "function": "geonetwork_url"
          }
        }
      },
      "keep": false
    },
    "attachments": {
      "!docstring": "DataSource1",
      "xpath": "mdb:distributionInfo[mrd:MD_Distribution/mrd:transferOptions/mrd:MD_DigitalTransferOptions/mrd:onLine/cit:CI_OnlineResource[normalize-space(cit:protocol/gco:CharacterString)=\"WWW:DOWNLOAD-1.0-http--download\"]]",
      "keep": false,
      "type": "array",
      "items": {
        "type": "object",
        "xpath": "mdb:distributionInfo[mrd:MD_Distribution/mrd:transferOptions/mrd:MD_DigitalTransferOptions/mrd:onLine/cit:CI_OnlineResource[normalize-space(cit:protocol/gco:CharacterString)=\"WWW:DOWNLOAD-1.0-http--download\"]]",
        "properties": {
          "file": {
            "xpath": "mrd:MD_Distribution/mrd:transferOptions/mrd:MD_DigitalTransferOptions/mrd:onLine/cit:CI_OnlineResource/cit:linkage/gco:CharacterString",
            "xpath_required": true,
            "attributes": {
              "text": {
                "function": "generate_attachment_url"
              }
            }
          },
          "name": {
            "type": "string",
            "export": false
          },
          "title": {
            "type": "string",
            "xpath": "mrd:MD_Distribution/mrd:transferOptions/mrd:MD_DigitalTransferOptions/mrd:onLine/cit:CI_OnlineResource/cit:name/gco:CharacterString",
            "rules": ["requiredField"]
          },
          "id": {
            "type": "number"
          },
          "created": {
            "type": "string"
          },
          "modified": {
            "type": "string"
          },
          "delete_url": {
            "type": "string"
          }
        }
      }
    },
    "dataSources": {
      "xpath": "mdb:distributionInfo[not(mrd:MD_Distribution/mrd:transferOptions/mrd:MD_DigitalTransferOptions/mrd:onLine/cit:CI_OnlineResource[normalize-space(cit:protocol/gco:CharacterString)=\"WWW:DOWNLOAD-1.0-http--download\"])]",
      "type": "array",
      "keep": false,
      "deleteWhenEmpty": false,
      "items": {
        "xpath": "mdb:distributionInfo[not(mrd:MD_Distribution/mrd:transferOptions/mrd:MD_DigitalTransferOptions/mrd:onLine/cit:CI_OnlineResource[normalize-space(cit:protocol/gco:CharacterString)=\"WWW:DOWNLOAD-1.0-http--download\"])]",
        "type": "object",
        "export": false,
        "deleteWhenEmpty": false,
        "rules": [
          "protocolLayer",
          {
            "defaultDistributor": {
              "uri": "https://w3id.org/tern/resources/8f2acf9f-3cf2-48c7-b911-ed1b1113932e",
              "site_uri": "https://w3id.org/tern/resources/fa56a1ed-ec38-4294-90ae-ab203a25d5ad",
              "date_created": "2021-05-14T03:33:48.260Z",
              "date_modified": "2021-05-14T05:18:27.281Z",
              "name": "TERN Ecosystem Processes - UQ Long Pocket",
              "display_name": "TERN Ecosystem Processes - UQ Long Pocket",
              "is_dissolved": "false",
              "full_address_line": "Building 1019, 80 Meiers Rd, Indooroopilly, QLD, Australia, 4068",
              "street_address": "Building 1019, 80 Meiers Rd",
              "address_locality": "Indooroopilly",
              "address_region": "QLD",
              "postcode": "4068",
              "country": "Australia"
            }
          }
        ],
        "properties": {
          "uri": {
            "type": "string"
          },
          "isUserDefined": {
            "type": "boolean"
          },
          "distributor": {
            "xpath": "mrd:MD_Distribution/mrd:distributor/mrd:MD_Distributor/mrd:distributorContact/cit:CI_Responsibility",
            "type": "object",
            "properties": {
              "name": {
                "xpath": "cit:party/cit:CI_Organisation/cit:name",
                "type": "string",
                "valueChild": "gco:CharacterString",
                "keep": false
              },
              "display_name": {
                "!docstring": "No exported; used for display purposes from the ES index",
                "type": "string"
              },
              "uri": {
                "xpath": "cit:party/cit:CI_Organisation/cit:partyIdentifier",
                "type": "string",
                "valueChild": "mcc:MD_Identifier/mcc:code/gcx:Anchor",
                "keep": false,
                "parser": {
                  "function": "parse_organisation_identifier"
                },
                "attributes": {
                  "xlink:href": {
                    "function": "separate_organisation_identifier"
                  },
                  "text": {
                    "function": "identity"
                  }
                }
              },
              "full_address_line": {
                "xpath": "cit:party/cit:CI_Organisation/cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:deliveryPoint[1]",
                "type": "string",
                "keep": false,
                "valueChild": "gco:CharacterString"
              },
              "street_address": {
                "type": "string",
                "keep": false,
                "valueChild": "gco:CharacterString"
              },
              "address_locality": {
                "xpath": "cit:party/cit:CI_Organisation/cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:city",
                "type": "string",
                "keep": false,
                "valueChild": "gco:CharacterString"
              },
              "address_region": {
                "xpath": "cit:party/cit:CI_Organisation/cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:administrativeArea",
                "type": "string",
                "keep": false,
                "valueChild": "gco:CharacterString"
              },
              "postcode": {
                "xpath": "cit:party/cit:CI_Organisation/cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:postalCode",
                "type": "string",
                "keep": false,
                "valueChild": "gco:CharacterString"
              },
              "country": {
                "xpath": "cit:party/cit:CI_Organisation/cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:country",
                "type": "string",
                "keep": false,
                "valueChild": "gco:CharacterString"
              },
              "email": {
                "xpath": "cit:party/cit:CI_Organisation/cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:electronicMailAddress",
                "type": "string",
                "keep": false,
                "valueChild": "gco:CharacterString"
              },
              "site_uri": {"type":"string"},
              "date_modified": {"type":"string"},
              "date_created": {"type":"string"},
              "is_dissolved": {"type":"string"}
            }
          },
          "transferOptions": {
            "xpath": "mrd:MD_Distribution/mrd:transferOptions",
            "type": "object",
            "properties": {
              "linkage": {
                "!docstring": "DataSource11",
                "xpath": "mrd:MD_DigitalTransferOptions/mrd:onLine/cit:CI_OnlineResource/cit:linkage/gco:CharacterString",
                "type": "string",
                "rules": ["requiredField"]
              },
              "protocol": {
                "!docstring": "DataSource10",
                "xpath": "mrd:MD_DigitalTransferOptions/mrd:onLine/cit:CI_OnlineResource/cit:protocol/gco:CharacterString",
                "type": "string",
                "rules": ["requiredField"]
              },
              "name": {
                "!docstring": "DataSource6",
                "xpath": "mrd:MD_DigitalTransferOptions/mrd:onLine/cit:CI_OnlineResource/cit:name",
                "valueChild": "gco:CharacterString",
                "type": "string",
                "keep": false,
                "rules": ["requiredField"]
              },
              "description": {
                "!docstring": "DataSource5",
                "xpath": "mrd:MD_DigitalTransferOptions/mrd:onLine/cit:CI_OnlineResource/cit:description/gco:CharacterString",
                "type": "string"
              }
            }
          }
        }
      }
    },
    "parentMetadata": {
      "!docstring": "ID3",
      "xpath": "mdb:parentMetadata",
      "type": "object",
      "rules": [
        {
          "requiredWhenYes": {
            "bool-field": "parentMetadataFlag",
            "opt-field": "record"
          }
        }
      ],
      "properties": {
        "parentMetadataFlag": {
          "type": "boolean",
          "default": false,
          "keep": true,
          "export": false,
          "xpath": "cit:CI_Citation"
        },
        "record": {
          "type": "object",
          "xpath": "cit:CI_Citation",
          "properties": {
            "label": {
              "keep": false,
              "xpath": "cit:title/gco:CharacterString"
            },
            "uuid": {},
            "abstract": {},
            "uri": {
              "keep": false,
              "xpath": "cit:identifier/mcc:MD_Identifier/mcc:code/gcx:Anchor",
              "attributes": {
                "text": {
                  "function": "geonetwork_uuid"
                },
                "xlink:href": {
                  "function": "identity"
                }
              }
            }
          }
        }
      }
    },
    "referenceSystemInfo": {
      "xpath": "mdb:referenceSystemInfo/mrs:MD_ReferenceSystem/mrs:referenceSystemIdentifier/mcc:MD_Identifier",
      "type": "object",
      "properties": {
        "crsCode": {
          "!docstring": "Where3",
          "xpath": ".",
          "keep": false,
          "type": "object",
          "properties": {
            "code": {
              "xpath": "mcc:code/gco:CharacterString",
              "type": "string"
            },
            "codeSpace": {
              "type": "string"
            },
            "description": {
              "xpath": "mcc:description/gco:CharacterString",
              "type": "string"
            },
            "label": {
              "type": "string"
            },
            "version": {
              "!docstring": "Where4",
              "xpath": "mcc:version/gco:CharacterString",
              "type": "string"
            }
          },
          "rules": ["requiredField"]
        }
      }
    },
    "identificationInfo": {
      "xpath": "mdb:identificationInfo/mri:MD_DataIdentification",
      "rules": [
        "maintFreq",
        "endPosition",
        {
          "dateOrder": {
            "field0": "beginPosition",
            "field1": "endPosition"
          }
        },
        {
          "requiredWhenYes": {
            "bool-field": "datePublicationFlag",
            "opt-field": "datePublication"
          }
        },
        {
          "requiredWhenYes": {
            "bool-field": "doiFlag",
            "opt-field": "doi"
          }
        },
        {
          "requiredWhenYes": {
            "bool-field": "doiFlag",
            "opt-field": "doiRequested",
            "negate": true
          }
        },
        "generateCitation",
        {
          "defaultClassification": {
            "label": "Unclassified",
            "value": "unclassified"
          }
        }
      ],
      "type": "object",
      "properties": {
        "title": {
          "!docstring": "ID1",
          "xpath": "mri:citation/cit:CI_Citation/cit:title",
          "valueChild": "gco:CharacterString",
          "type": "string",
          "keep": true,
          "xpath_required": true,
          "rules": [
            "requiredField"
          ]
        },
        "topicCategories": {
          "!docstring": "ID4",
          "xpath": "mri:topicCategory",
          "keep": false,
          "type": "array",
          "items": {
            "type": "object",
            "xpath": "mri:topicCategory",
            "properties": {
              "uri": {
                "type": "string"
              },
              "label": {
                "type": "string"
              },
              "value": {
                "type": "string",
                "xpath": "mri:MD_TopicCategoryCode"
              }
            }
          },
          "rules": [
            "requiredField"
          ]
        },
        "status": {
          "!docstring": "ID5",
          "xpath": "mri:status",
          "valueChild": "mcc:MD_ProgressCode",
          "attributes": {
            "text": {
              "function": "identity"
            },
            "codeListValue": {
              "function": "identity"
            }
          },
          "rules": [
            "requiredField"
          ]
        },
        "maintenanceAndUpdateFrequency": {
          "!docstring": "ID9",
          "xpath": "mri:resourceMaintenance/mmi:MD_MaintenanceInformation/mmi:maintenanceAndUpdateFrequency",
          "valueChild": "mmi:MD_MaintenanceFrequencyCode",
          "attributes": {
            "codeListValue": {
              "function": "identity"
            }
          }
        },
        "dateCreation": {
          "!docstring": "ID6",
          "type": "string",
          "xpath": "mri:citation/cit:CI_Citation/cit:date/cit:CI_Date[cit:dateType/cit:CI_DateTypeCode[@codeListValue=\"creation\"]]/cit:date",
          "valueChild": "gco:Date",
          "keep": false,
          "xpath_required": true,
          "rules": ["requiredField"]
        },
        "dateSubmitted": {
          "!docstring": "Created by the backend when data is submitted",
          "type": "string",
          "export": false,
          "xpath": "dateSubmitted"
        },
        "datePublicationFlag": {
          "type": "boolean",
          "keep": true,
          "default": false,
          "export": false,
          "xpath": "mri:citation/cit:CI_Citation/cit:date[cit:CI_Date/cit:dateType/cit:CI_DateTypeCode[@codeListValue=\"publication\"]]"
        },
        "datePublication": {
          "!docstring": "ID8",
          "type": "string",
          "xpath": "mri:citation/cit:CI_Citation/cit:date[cit:CI_Date/cit:dateType/cit:CI_DateTypeCode[@codeListValue=\"publication\"]]",
          "valueChild": "cit:CI_Date/cit:date/gco:Date",
          "keep": false
        },
        "version": {
          "!docstring": "ID7",
          "type": "string",
          "xpath": "mri:citation[1]/cit:CI_Citation[1]/cit:edition",
          "valueChild": "gco:CharacterString",
          "keep": false,
          "xpath_required": true,
          "rules": ["requiredField"]
        },
        "abstract": {
          "!docstring": "What1",
          "xpath": "mri:abstract",
          "valueChild": "gco:CharacterString",
          "type": "string",
          "keep": false,
          "xpath_required": true,
          "rules": ["requiredField"]
        },
        "purpose": {
          "!docstring": "What2",
          "xpath": "mri:purpose",
          "valueChild": "gco:CharacterString",
          "type": "string",
          "keep": false
        },
        "citedResponsibleParty": {
          "!docstring": "Who tab: Responsible for the creation of the dataset",
          "xpath": "mri:citation/cit:CI_Citation/cit:citedResponsibleParty/cit:CI_Responsibility[cit:role/cit:CI_RoleCode[not(@codeListValue=\"publisher\")]]",
          "container": "mri:citation/cit:CI_Citation/cit:citedResponsibleParty[cit:CI_Responsibility/cit:role/cit:CI_RoleCode[not(@codeListValue=\"publisher\")]]",
          "keep": false,
          "type": "array",
          "items": {
            "xpath": "mri:citation/cit:CI_Citation/cit:citedResponsibleParty/cit:CI_Responsibility[cit:role/cit:CI_RoleCode[not(@codeListValue=\"publisher\")]]",
            "type": "object",
            "properties": {
              "role": {
                "!docstring": "Who2 / Who11",
                "xpath": "cit:role/cit:CI_RoleCode",
                "keep": false,
                "type": "object",
                "properties": {
                  "Identifier": {
                    "xpath": ".",
                    "type": "string",
                    "attributes": {
                      "codeListValue": {
                        "function": "identity"
                      }
                    },
                    "parser": {
                      "function": "parse_codeListValue"
                    },
                    "rules": ["requiredField"]
                  },
                  "Description": {
                    "type": "string"
                  },
                  "UUID": {
                    "type": "string"
                  }
                },
                "xpath_required": true,
                "rules": ["requiredField"]
              },
              "organisation": {
                "xpath": "cit:party/cit:CI_Organisation",
                "type": "object",
                "properties": {
                  "name": {
                    "!docstring": "Who8 / Who12",
                    "xpath": "cit:name",
                    "valueChild": "gco:CharacterString",
                    "type": "string",
                    "rules": ["requiredField"],
                    "keep": false
                  },
                  "display_name": {
                    "type": "string"
                  },
                  "uri": {
                    "!docstring": "Who8 / Who9 / Who12",
                    "xpath": "cit:partyIdentifier",
                    "valueChild": "mcc:MD_Identifier/mcc:code/gcx:Anchor",
                    "type": "string",
                    "keep": false,
                    "parser": {
                      "function": "parse_organisation_identifier"
                    },
                    "attributes": {
                      "xlink:href": {
                        "function": "separate_organisation_identifier"
                      },
                      "text": {
                        "function": "identity"
                      }
                    }
                  },
                  "full_address_line": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:deliveryPoint[1]",
                    "type": "string",
                    "rules": ["requiredField"],
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "street_address": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:deliveryPoint[2]",
                    "type": "string",
                    "rules": ["requiredField"],
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "address_locality": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:city",
                    "type": "string",
                    "rules": ["requiredField"],
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "address_region": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:administrativeArea",
                    "type": "string",
                    "rules": ["requiredField"],
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "postcode": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:postalCode",
                    "type": "string",
                    "rules": ["requiredField"],
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "country": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:country",
                    "type": "string",
                    "rules": ["requiredField"],
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "email": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:electronicMailAddress",
                    "type": "string",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "phone": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "TODO",
                    "keep": false,
                    "type": "string",
                    "valueChild": "gco:CharacterString"
                  },
                  "duma_path": {
                    "type": "string"
                  },
                  "userAddedCategory": {},
                  "isUserDefined": {}
                },
                "rules": ["requiredField"]
              },
              "contact": {
                "!docstring": "Who3",
                "type": "object",
                "xpath": "cit:party/cit:CI_Organisation/cit:individual",
                "properties": {
                  "canonical_name": {
                    "!docstring": "Not for entry; holds 'surname,given_name'",
                    "xpath": "cit:CI_Individual/cit:name/gco:CharacterString",
                    "type": "string",
                    "keep": false
                  },
                  "name": {
                    "!docstring": "Who3",
                    "type": "string",
                    "keep": false
                  },
                  "surname": {
                    "!docstring": "Who5",
                    "type": "string",
                    "keep": false,
                    "export": false
                  },
                  "given_name": {
                    "!docstring": "Who4",
                    "type": "string",
                    "keep": false,
                    "export": false
                  },
                  "position": {
                    "type": "string",
                    "xpath": "cit:CI_Individual/cit:positionName/gco:CharacterString"
                  },
                  "email": {
                    "!docstring": "Who6",
                    "xpath": "cit:CI_Individual/cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:electronicMailAddress",
                    "valueChild": "gco:CharacterString",
                    "type": "string",
                    "keep": false
                  },
                  "phone": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "TODO",
                    "type": "string",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "orcid": {
                    "!docstring": "Who7",
                    "xpath": "cit:CI_Individual/cit:partyIdentifier/mcc:MD_Identifier/mcc:code/gco:CharacterString",
                    "type": "string",
                    "deleteWhenEmpty": false,
                    "parser": {
                      "function": "parse_individual_orcid"
                    },
                    "attributes": {
                      "text": {
                        "function": "write_orcid"
                      }
                    },
                    "rules": ["validOrcid"]
                  },
                  "uri": {
                    "!docstring": "Populated via the controlled vocab contact picker; replaces orcid if that doesn't exist",
                    "xpath": "cit:CI_Individual/cit:partyIdentifier/mcc:MD_Identifier/mcc:code/gcx:Anchor",
                    "type": "string",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      },
                      "text": {
                        "function": "identity"
                      }
                    }
                  },
                  "duma_path": {
                    "type": "string"
                  },
                  "userAddedCategory": {},
                  "isUserDefined": {}
                },
                "rules": ["mergeNameParts"]
              },
              "uri": {},
              "partyType": {},
              "isUserDefined": {
                "!docstring": "Fake node so we can track person status",
                "xpath": "isUserAdded",
                "default": false,
                "export": false
              }
            },
            "rules": [
              "contactNotForOrgs",
              "contactOrganisationUserDefined"
            ]
          },
          "rules": ["requiredField"],
          "notes": "Responsible party/ies for creating dataset"
        },
        "pointOfContact": {
          "xpath": "mri:pointOfContact/cit:CI_Responsibility",
          "container": "mri:pointOfContact",
          "keep": false,
          "type": "array",
          "items": {
            "xpath": "mri:pointOfContact/cit:CI_Responsibility",
            "type": "object",
            "properties": {
              "role": {
                "!docstring": "Who2 / Who11",
                "xpath": "cit:role/cit:CI_RoleCode",
                "keep": false,
                "type": "object",
                "properties": {
                  "Identifier": {
                    "xpath": ".",
                    "type": "string",
                    "attributes": {
                      "codeListValue": {
                        "function": "identity"
                      }
                    },
                    "parser": {
                      "function": "parse_codeListValue"
                    },
                    "rules": ["requiredField"]
                  },
                  "Description": {
                    "type": "string"
                  },
                  "UUID": {
                    "type": "string"
                  }
                },
                "xpath_required": true,
                "rules": ["requiredField"]
              },
              "organisation": {
                "xpath": "cit:party/cit:CI_Organisation",
                "type": "object",
                "properties": {
                  "name": {
                    "!docstring": "Who8 / Who12",
                    "xpath": "cit:name",
                    "valueChild": "gco:CharacterString",
                    "rules": ["requiredField"],
                    "keep": false
                  },
                  "display_name": {
                    "type": "string"
                  },
                  "uri": {
                    "!docstring": "Who8 / Who9 / Who12",
                    "xpath": "cit:partyIdentifier",
                    "valueChild": "mcc:MD_Identifier/mcc:code/gcx:Anchor",
                    "keep": false,
                    "parser": {
                      "function": "parse_organisation_identifier"
                    },
                    "attributes": {
                      "xlink:href": {
                        "function": "separate_organisation_identifier"
                      },
                      "text": {
                        "function": "identity"
                      }
                    }
                  },
                  "full_address_line": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:deliveryPoint[1]",
                    "rules": ["requiredField"],
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "street_address": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:deliveryPoint[2]",
                    "rules": ["requiredField"],
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "address_locality": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:city",
                    "rules": ["requiredField"],
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "address_region": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:administrativeArea",
                    "rules": ["requiredField"],
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "postcode": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:postalCode",
                    "rules": ["requiredField"],
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "country": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:country",
                    "rules": ["requiredField"],
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "email": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:electronicMailAddress",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "duma_path":{
                    "type": "string"
                  },
                  "userAddedCategory": {
                    "type": "string"
                  },
                  "isUserDefined": {}
                },
                "rules": ["requiredField"]
              },
              "contact": {
                "!docstring": "Who3",
                "type": "object",
                "xpath": "cit:party/cit:CI_Organisation/cit:individual",
                "properties": {
                  "canonical_name": {
                    "!docstring": "Not for entry; holds 'surname,given_name'",
                    "xpath": "cit:CI_Individual/cit:name/gco:CharacterString",
                    "type": "string",
                    "keep": false
                  },
                  "name": {
                    "!docstring": "Who3",
                    "type": "string",
                    "keep": false
                  },
                  "surname": {
                    "!docstring": "Who5",
                    "type": "string",
                    "keep": false,
                    "export": false
                  },
                  "given_name": {
                    "!docstring": "Who4",
                    "type": "string",
                    "keep": false,
                    "export": false
                  },
                  "position": {
                    "type": "string",
                    "xpath": "cit:CI_Individual/cit:positionName/gco:CharacterString",
                    "keep": false
                  },
                  "email": {
                    "!docstring": "Who6",
                    "xpath": "cit:CI_Individual/cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:electronicMailAddress",
                    "valueChild": "gco:CharacterString",
                    "type": "string",
                    "keep": false
                  },
                  "orcid": {
                    "!docstring": "Who7",
                    "xpath": "cit:CI_Individual/cit:partyIdentifier/mcc:MD_Identifier/mcc:code/gco:CharacterString",
                    "type": "string",
                    "deleteWhenEmpty": false,
                    "parser": {
                      "function": "parse_individual_orcid"
                    },
                    "attributes": {
                      "text": {
                        "function": "write_orcid"
                      }
                    },
                    "rules": ["validOrcid"]
                  },
                  "uri": {
                    "!docstring": "Populated via the controlled vocab contact picker; replaces orcid if that doesn't exist",
                    "xpath": "cit:CI_Individual/cit:partyIdentifier/mcc:MD_Identifier/mcc:code/gcx:Anchor",
                    "type": "string",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      },
                      "text": {
                        "function": "identity"
                      }
                    }
                  },
                  "duma_path":{
                    "type": "string"
                  },
                  "userAddedCategory": {
                    "type": "string"
                  },
                  "isUserDefined": {}
                },
                "rules": ["mergeNameParts"]
              },
              "uri": {},
              "partyType": {},
              "isUserDefined": {
                "!docstring": "Fake node so we can track person status",
                "xpath": "isUserAdded",
                "default": false,
                "export": false
              }
            },
            "rules": [
              "contactNotForOrgs",
              "contactOrganisationUserDefined",
              {
                "defaultRole": {
                  "UUID": "6511df52-a5ff-42da-8788-34dcad38ccc8",
                   "Identifier": "pointOfContact",
                   "Description": "Party who can be contacted for acquiring knowledge about or acquisition of the resource"
                }
              }
            ]
          },
          "rules": ["requiredField"]
        },
        "geographicElement": {
          "xpath": "mri:extent/gex:EX_Extent[gex:geographicElement][gex:temporalElement]",
          "type": "object",
          "properties": {
            "siteDescription": {
              "!docstring": "Where1",
              "xpath": "gex:description",
              "valueChild": "gco:CharacterString",
              "type": "string",
              "keep": false
            },
            "boxes": {
              "!docstring": "Where2",
              "xpath": "gex:geographicElement",
              "keep": false,
              "type": "array",
              "items": {
                "xpath": "gex:geographicElement",
                "type": "object",
                "properties": {
                  "uri": {},
                  "isUserDefined": {},
                  "westBoundLongitude": {
                    "xpath": "gex:EX_GeographicBoundingBox/gex:westBoundLongitude/gco:Decimal",
                    "rules": [
                      "requiredField"
                    ],
                    "type": "number"
                  },
                  "eastBoundLongitude": {
                    "xpath": "gex:EX_GeographicBoundingBox/gex:eastBoundLongitude/gco:Decimal",
                    "rules": [
                      "requiredField"
                    ],
                    "type": "number"
                  },
                  "southBoundLatitude": {
                    "xpath": "gex:EX_GeographicBoundingBox/gex:southBoundLatitude/gco:Decimal",
                    "rules": [
                      "requiredField"
                    ],
                    "type": "number"
                  },
                  "northBoundLatitude": {
                    "xpath": "gex:EX_GeographicBoundingBox/gex:northBoundLatitude/gco:Decimal",
                    "rules": [
                      "requiredField"
                    ],
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "verticalElement": {
          "xpath": "mri:extent/gex:EX_Extent/gex:verticalElement/gex:EX_VerticalExtent",
          "type": "object",
          "keep": false,
          "rules": [
            {
              "numericOrder": {
                "field-min": "minimumValue",
                "field-max": "maximumValue"
              }
            },
            {
              "requiredIfValue": {
                "value-field": "coordinateReferenceSystem",
                "dependent-field": "minimumValue"
              }
            },
            {
              "requiredIfValue": {
                "value-field": "coordinateReferenceSystem",
                "dependent-field": "maximumValue"
              }
            }
          ],
          "properties": {
            "coordinateReferenceSystem": {
              "!docstring": "Where5",
              "xpath": "gex:verticalCRSId/mrs:MD_ReferenceSystem/mrs:referenceSystemIdentifier/mcc:MD_Identifier",
              "type": "object",
              "properties": {
                "code": {
                  "xpath": "mcc:code/gco:CharacterString",
                  "type": "string"
                },
                "codeSpace": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "label": {
                  "type": "string"
                },
                "version": {
                  "type": "string"
                }
              }
            },
            "minimumValue": {
              "!docstring": "Where7",
              "type": "number",
              "xpath": "gex:minimumValue/gco:Real",
              "keep": false,
              "rules": [
                "positive"
              ]
            },
            "maximumValue": {
              "!docstring": "Where8",
              "type": "number",
              "xpath": "gex:maximumValue/gco:Real",
              "keep": false,
              "rules": [
                "positive"
              ]
            }
          }
        },
        "SpatialResolution": {
          "type": "object",
          "xpath": "mri:spatialResolution/mri:MD_Resolution",
          "properties": {
            "ResolutionAttribute": {
              "!docstring": "Where9",
              "type": "string"
            },
            "ResolutionAttributeValue": {
              "!docstring": "Where10",
              "type": "number"
            },
            "ResolutionAttributeUnits": {
              "!docstring": "Derived; depends on the value of Where9",
              "type": "string"
            }
          },
          "export": false,
          "exportTo": {
            "function": "spatial_units_export"
          },
          "rules": [
            "spatialUnits",
            {
              "requiredIfValue": {
                "value-field": "ResolutionAttribute",
                "dependent-field": "ResolutionAttributeValue"
              }
            }
          ]
        },
        "keywordsTheme": {
          "!docstring": "What3",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"theme\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://gcmd.earthdata.nasa.gov/kms/concepts/concept_scheme/sciencekeywords\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "rules": [{"maxKeywords": {"max-keywords": 12}}],
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "breadcrumb": {},
                  "label": {
                    "xpath": "gcx:Anchor"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true,
          "rules": ["requiredField"]
        },
        "keywordsThemeAnzsrc": {
          "!docstring": "What4",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"theme\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://www.abs.gov.au/statistics/classifications/australian-and-new-zealand-standard-research-classification-anzsrc/2020\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "rules": [{"maxKeywords": {"max-keywords": 12}}],
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "breadcrumb": {},
                  "label": {
                    "xpath": "gcx:Anchor"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true,
          "rules": ["requiredField"]
        },
        "keywordsPlatform": {
          "!docstring": "What5",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"platform\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://w3id.org/tern/resources/\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "breadcrumb": {},
                  "isUserDefined": {},
                  "duma_path":{
                    "type": "string"
                  },
                  "userAddedCategory": {
                    "type": "string"
                  },
                  "label": {
                    "type": "string",
                    "rules": ["requiredField"],
                    "xpath": "gcx:Anchor"
                  },
                  "source": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true
        },
        "keywordsInstrument": {
          "!docstring": "What6",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"instrument\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"http://linked.data.gov.au/def/tern-cv/a3088b5c-622d-4e25-8a75-4c4961b0dfe8\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "breadcrumb": {},
                  "isUserDefined": {},
                  "userAddedCategory": {
                    "type": "string"
                  },
                  "duma_path": {
                    "type": "string"
                  },
                  "label": {
                    "type": "string",
                    "rules": ["requiredField"],
                    "xpath": "gcx:Anchor"
                  },
                  "source": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "serial": {
                    "type": "string"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true
        },
        "keywordsParametersUnits": {
          "!docstring": "What8",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"uom\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"http://www.qudt.org/2.1/vocab/unit\"]",
          "type": "object",
          "keep": false,
          "deleteWhenEmpty": false,
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "parameter": {
                    "type": "object",
                    "export": false,
                    "properties": {
                      "description": {
                        "type": "string"
                      },
                      "isUserDefined": {
                        "type": "boolean"
                      },
                      "userAddedCategory": {
                        "type": "string"
                      },
                      "symbol": {
                        "type": "string"
                      },
                      "source": {
                        "type": "string"
                      },
                      "label": {
                        "rules": ["requiredField"],
                        "type": "string",
                        "xpath": "gcx:Anchor"
                      },
                      "uri": {
                        "type": "string",
                        "xpath": "gcx:Anchor",
                        "attributes": {
                          "xlink:href": {
                            "function": "identity"
                          }
                        }
                      },
                      "duma_path":{
                        "type": "string"
                      },
                      "broader": {"type": "string"},
                      "broader_chain": {"type": "string"},
                      "broader_chain_label": {"type": "string"},
                      "breadcrumb": {"type": "string"},
                      "altLabel": {"type": "string"},
                      "is_top_concept": {"type": "boolean"}
                    }
                  },
                  "unit": {
                    "!docstring": "What9",
                    "xpath": ".",
                    "type": "object",
                    "properties": {
                      "label": {
                        "xpath": "gcx:Anchor",
                        "rules": ["requiredField"],
                        "type": "string"
                      },
                      "description": {
                        "type": "string"
                      },
                      "uri": {
                        "xpath": "gcx:Anchor",
                        "attributes": {
                          "xlink:href": {
                            "function": "identity"
                          }
                        },
                        "type": "string"
                      },
                      "isUserDefined": {
                        "type": "boolean"
                      },
                      "duma_path": {
                        "type": "string"
                      },
                      "userAddedCategory": {
                        "type": "string"
                      },
                      "ucumCode": {
                        "type": "string"
                      }
                    }
                  },
                  "uri": {
                    "type": "string"
                  },
                  "isUserDefined": {
                    "type": "boolean"
                  }
                },
                "rules": ["parameterUnitUserDefined"]
              }
            }
          },
          "xpath_required": true,
          "rules": ["requiredField"]
        },
        "keywordsTemporal": {
          "!docstring": "What10",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"dataResolution\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://gcmd.earthdata.nasa.gov/kms/concepts/concept_scheme/temporalresolutionrange/?format=xml\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "object",
              "properties": {
                "breadcrumb": {},
                "label": {
                  "xpath": "gcx:Anchor"
                },
                "uri": {
                  "xpath": "gcx:Anchor",
                  "attributes": {
                    "xlink:href": {
                      "function": "identity"
                    }
                  }
                }
              },
              "rules": ["requiredField"]
            }
          },
          "xpath_required": true
        },
        "keywordsHorizontal": {
          "!docstring": "What11",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"dataResolution\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://gcmd.earthdata.nasa.gov/kms/concepts/concept_scheme/horizontalresolutionrange/?format=xml\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "object",
              "properties": {
                "breadcrumb": {},
                "label": {
                  "xpath": "gcx:Anchor"
                },
                "uri": {
                  "xpath": "gcx:Anchor",
                  "attributes": {
                    "xlink:href": {
                      "function": "identity"
                    }
                  }
                }
              },
              "rules": ["requiredField"]
            }
          },
          "xpath_required": true
        },
        "keywordsVertical": {
          "!docstring": "What12",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"dataResolution\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://gcmd.earthdata.nasa.gov/kms/concepts/concept_scheme/verticalresolutionrange/?format=xml\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "object",
              "properties": {
                "label": {
                  "xpath": "gcx:Anchor"
                },
                "uri": {
                  "xpath": "gcx:Anchor",
                  "attributes": {
                    "xlink:href": {
                      "function": "identity"
                    }
                  }
                }
              }
            }
          }
        },
        "keywordsFlora": {
          "!docstring": "What13",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"taxon\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"http://www.cpbr.gov.au/cgi-bin/apni\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "breadcrumb": {},
                  "label": {
                    "xpath": "gcx:Anchor"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true
        },
        "keywordsFauna": {
          "!docstring": "What14",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"taxon\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://biodiversity.org.au/afd/home\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "breadcrumb": {},
                  "label": {
                    "xpath": "gcx:Anchor"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true
        },
        "keywordsAdditional": {
          "!docstring": "What15",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"discipline\"]]",
          "type": "object",
          "properties": {
            "keywords": {
              "keep": false,
              "xpath": "mri:keyword",
              "type": "array",
              "items": {
                "type": "string",
                "xpath": "mri:keyword/gco:CharacterString"
              }
            }
          },
          "xpath_required": true
        },
        "beginPosition": {
          "!docstring": "When1",
          "xpath": "mri:extent/gex:EX_Extent/gex:temporalElement/gex:EX_TemporalExtent/gex:extent/gml:TimePeriod/gml:beginPosition",
          "xpath_required": true,
          "keep": false,
          "type": "string",
          "rules": ["requiredField"]
        },
        "endPosition": {
          "!docstring": "When2",
          "xpath": "mri:extent/gex:EX_Extent/gex:temporalElement/gex:EX_TemporalExtent/gex:extent/gml:TimePeriod/gml:endPosition",
          "deleteWhenEmpty": true,
          "keep": false,
          "type": "string"
        },
        "useLimitation": {
          "!docstring": "About - non-editable but displayed from the template",
          "xpath": "mri:resourceConstraints/mco:MD_LegalConstraints/mco:useLimitation/gco:CharacterString",
          "type": "string",
          "keep": true,
          "export": false
        },
        "otherConstraints": {
          "!docstring": "About - non-editable but displayed from the template",
          "xpath": "(mri:resourceConstraints/mco:MD_LegalConstraints/mco:otherConstraints/gco:CharacterString)[position()<last()]",
          "keep": true,
          "export": false,
          "type": "array",
          "items": {
            "xpath": ".",
            "export": false,
            "type": "string"
          }
        },
        "additionalConstraints": {
          "!docstring": "About1",
          "keep": false,
          "type": "object",
          "xpath": "mri:resourceConstraints/mco:MD_LegalConstraints",
          "properties": {
            "constraints": {
              "keep": false,
              "type": "array",
              "xpath": "mco:otherConstraints",
              "container": "mco:otherConstraints[last()]",
              "items": {
                "type": "string",
                "keep": false,
                "append": true,
                "xpath": "mco:otherConstraints",
                "valueChild": "gco:CharacterString"
              }
            }
          }
        },
        "securityClassification": {
          "!docstring": "About2",
          "type": "object",
          "xpath": "mri:resourceConstraints/mco:MD_SecurityConstraints/mco:classification/mco:MD_ClassificationCode",
          "properties": {
            "label": {
              "type": "string"
            },
            "value": {
              "xpath": ".",
              "attributes": {
                "codeListValue": {
                  "function": "identity"
                }
              }
            }
          }
        },
        "environment": {
          "!docstring": "About3",
          "xpath": "mri:environmentDescription",
          "valueChild": "gco:CharacterString",
          "keep": false,
          "type": "string"
        },
        "supplemental": {
          "!docstring": "About4",
          "xpath": "mri:supplementalInformation",
          "valueChild": "gco:CharacterString",
          "keep": false,
          "type": "string"
        },
        "additionalPublications": {
          "xpath": "mri:additionalDocumentation",
          "keep": false,
          "type": "array",
          "items": {
            "xpath": "mri:additionalDocumentation",
            "keep": false,
            "type": "object",
            "properties": {
              "title": {
                "!docstring": "About5 -- appears in two locations",
                "type": "string",
                "export": true,
                "xpath": "cit:CI_Citation/cit:title/gco:CharacterString",
                "keep": false,
                "exportTo": {
                  "xpath": "cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:name/gco:CharacterString"
                }
              },
              "url": {
                "!docstring": "About6",
                "xpath": "cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString",
                "keep": false,
                "type": "string"
              },
              "uri": {},
              "isUserDefined": {},
              "userAddedCategory": {},
              "duma_path": {}
            }
          }
        },
        "resourceSpecificUsage": {
          "!docstring": "About7",
          "xpath": "mri:resourceSpecificUsage",
          "valueChild": "mri:MD_Usage/mri:specificUsage/gco:CharacterString",
          "keep": false,
          "type": "string"
        },
        "credit": {
          "!docstring": "About8",
          "xpath": "mri:credit[2]",
          "valueChild": "gco:CharacterString",
          "keep": false,
          "type": "string"
        },
        "customCitation": {
          "!docstring": "About9",
          "xpath": "mri:citation/cit:CI_Citation/cit:otherCitationDetails",
          "valueChild": "gco:CharacterString",
          "keep": false,
          "type": "string"
        },
        "generatedCitation": {
          "!docstring": "Schema for the system-generated citation displayed on Lodge page",
          "type": "string"
        },
        "thumbnail": {
          "!docstring": "DataSource3",
          "type": "object",
          "xpath": "mri:graphicOverview/mcc:MD_BrowseGraphic",
          "keep": false,
          "properties": {
            "title": {
              "!docstring": "DataSource2b",
              "type": "string",
              "xpath": "mcc:linkage/cit:CI_OnlineResource/cit:name/gco:CharacterString"
            },
            "file": {
              "!docstring": "DataSource3",
              "type": "object",
              "xpath": ".",
              "properties": {
                "file": {
                  "type": "string",
                  "xpath": "mcc:linkage/cit:CI_OnlineResource/cit:linkage/gco:CharacterString",
                  "attributes": {
                    "text": {
                      "function": "generate_attachment_url"
                    }
                  }
                },
                "name": {
                  "!docstring": "DataSource2",
                  "type": "string",
                  "xpath": "mcc:fileName/gco:CharacterString"
                },
                "id": {
                  "type": "number"
                },
                "created": {
                  "type": "string"
                },
                "modified": {
                  "type": "string"
                },
                "delete_url": {
                  "type": "string"
                }
              }
            }
          }
        },
        "doiFlag": {
          "type": "boolean",
          "default": false,
          "keep": true,
          "export": false,
          "xpath": "mri:citation/cit:CI_Citation/cit:identifier/mcc:MD_Identifier/mcc:code"
        },
        "doi": {
          "!docstring": "Lodge4",
          "xpath": "mri:citation/cit:CI_Citation/cit:identifier/mcc:MD_Identifier/mcc:code",
          "container": "mri:citation/cit:CI_Citation/cit:identifier",
          "keep": false,
          "valueChild": "gcx:Anchor",
          "attributes": {
            "text": {
              "function": "write_doi"
            },
            "xlink:href": {
              "function": "write_doi_url"
            }
          }
        }
      }
    },
    "resourceLineage": {
      "xpath": "mdb:resourceLineage/mrl:LI_Lineage",
      "type": "object",
      "properties": {
        "statement": {
          "!docstring": "How2",
          "type": "string",
          "xpath": "mrl:statement/gco:CharacterString",
          "keep": false
        },
        "onlineMethods": {
          "type": "array",
          "xpath": "mrl:additionalDocumentation",
          "keep": false,
          "items": {
            "type": "object",
            "xpath": "mrl:additionalDocumentation",
            "properties": {
              "isUserDefined": {},
              "uri": {
                "type": "string"
              },
              "userAddedCategory": {
                "keep": false,
                "type": "string"
              },
              "title": {
                "!docstring": "How3",
                "type": "string",
                "keep": false,
                "xpath": "cit:CI_Citation/cit:title/gco:CharacterString",
                "rules": ["requiredField"]
              },
              "url": {
                "!docstring": "How4",
                "type": "string",
                "keep": false,
                "xpath": "cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString",
                "rules": ["requiredField"]
              }
            }
          }
        },
        "steps": {
          "!docstring": "How7b",
          "xpath": "mrl:processStep",
          "keep": false,
          "type": "array",
          "items": {
            "xpath": "mrl:processStep/mrl:LI_ProcessStep/mrl:description/gco:CharacterString",
            "keep": false,
            "type": "string",
            "rules": [
              "requiredField"
            ]
          }
        }
      }
    },
    "dataQualityInfo": {
      "xpath": "mdb:dataQualityInfo/mdq:DQ_DataQuality",
      "type": "object",
      "properties": {
        "methodSummary": {
          "!docstring": "Data Quality 1",
          "xpath": "mdq:scope/mcc:MD_Scope/mcc:levelDescription/mcc:MD_ScopeDescription/mcc:other/gco:CharacterString",
          "type": "string",
          "keep": false
        },
        "results": {
          "!docstring": "Data Quality 3",
          "xpath": "mdq:report/mdq:DQ_QuantitativeAttributeAccuracy/mdq:result/mdq:DQ_DescriptiveResult/mdq:statement/gco:CharacterString",
          "keep": false,
          "type": "string"
        },
        "onlineMethods": {
          "!docstring": "Data Quality 2",
          "xpath": "mdq:standaloneQualityReport",
          "keep": false,
          "type": "object",
          "rules": [{
            "requiredAllNone": {
              "fields-list": [
                "title",
                "url"
              ]
            }
          }],
          "properties": {
            "title": {
              "xpath": "mdq:DQ_StandaloneQualityReportInformation/mdq:reportReference/cit:CI_Citation/cit:title/gco:CharacterString",
              "type": "string",
              "exportTo": {
                "xpath": "mdq:DQ_StandaloneQualityReportInformation/mdq:abstract/gco:CharacterString"
              }
            },
            "url": {
              "xpath": "mdq:DQ_StandaloneQualityReportInformation/mdq:reportReference/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage",
              "valueChild": "gco:CharacterString",
              "type": "string"
            }
          }
        }
      }
    },
    "noteForDataManager": {
      "!docstring": "Fake node so we can pass some additional metadata as payload",
      "xpath": "noteForDataManager",
      "type": "string",
      "default": "",
      "export": false
    },
    "agreedToTerms": {
      "!docstring": "Fake node so we can pass some additional metadata as payload",
      "xpath": "agreedToTerms",
      "type": "boolean",
      "default": false,
      "export": false
    },
    "doiRequested": {
      "!docstring": "Fake node so we can pass some additional metadata as payload",
      "xpath": "doiRequested",
      "type": "boolean",
      "default": false,
      "export": false
    },
    "personalCopyRequested": {
      "!docstring": "Fake node so we can pass some additional metadata as payload",
      "xpath": "personalCopyRequested",
      "type": "boolean",
      "default": false,
      "export": false
    },
    "systemCreationDate": {
      "!docstring": "System time when record first created",
      "type": "string",
      "xpath": "mdb:dateInfo/cit:CI_Date[cit:dateType/cit:CI_DateTypeCode[@codeListValue=\"creation\"]]",
      "valueChild": "cit:date/gco:Date"
    },
    "systemRevisionDate": {
      "!docstring": "System time when record last saved",
      "type": "string",
      "xpath": "mdb:dateInfo/cit:CI_Date[cit:dateType/cit:CI_DateTypeCode[@codeListValue=\"revision\"]]",
      "valueChild": "cit:date/gco:Date",
      "exportTo": {
        "xpath": "mdb:identificationInfo/mri:MD_DataIdentification/mri:citation/cit:CI_Citation/cit:date/cit:CI_Date[cit:dateType/cit:CI_DateTypeCode[@codeListValue=\"revision\"]]",
        "valueChild": "cit:date/gco:Date"
      }
    }
  },
  "export2_xforms": [
    [
      "generateParameterUnitKeywords",
      {
        "mount_xpath": "/mdb:MD_Metadata/mdb:identificationInfo/mri:MD_DataIdentification/mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"parameter\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"http://linked.data.gov.au/def/tern-cv/5699eca7-9ef0-47a6-bcfb-9306e0e2b85e\"]",
        "template_xpath": "/mdb:MD_Metadata/mdb:identificationInfo/mri:MD_DataIdentification/mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"parameter\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"http://linked.data.gov.au/def/tern-cv/5699eca7-9ef0-47a6-bcfb-9306e0e2b85e\"]/mri:keyword",
        "data_path": "identificationInfo.keywordsParametersUnits.keywords",
        "parameter_path": "parameter",
        "unit_path": "unit"
      }
    ],
    [
      "generateDatasourceDistributions",
      {
        "template_xpath": "/mdb:MD_Metadata/mdb:distributionInfo[not(mrd:MD_Distribution/mrd:transferOptions/mrd:MD_DigitalTransferOptions/mrd:onLine/cit:CI_OnlineResource[normalize-space(cit:protocol/gco:CharacterString)=\"WWW:DOWNLOAD-1.0-http--download\"])]",
        "data_path": "dataSources"
      }
    ]
  ]
}
