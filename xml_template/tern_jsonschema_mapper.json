{
  "namespaces": {
    "mdb": "http://standards.iso.org/iso/19115/-3/mdb/2.0",
    "xsi": "http://www.w3.org/2001/XMLSchema-instance",
    "cat": "http://standards.iso.org/iso/19115/-3/cat/1.0",
    "gfc": "http://standards.iso.org/iso/19110/gfc/1.1",
    "cit": "http://standards.iso.org/iso/19115/-3/cit/2.0",
    "gcx": "http://standards.iso.org/iso/19115/-3/gcx/1.0",
    "gex": "http://standards.iso.org/iso/19115/-3/gex/1.0",
    "lan": "http://standards.iso.org/iso/19115/-3/lan/1.0",
    "srv": "http://standards.iso.org/iso/19115/-3/srv/2.0",
    "mas": "http://standards.iso.org/iso/19115/-3/mas/1.0",
    "mcc": "http://standards.iso.org/iso/19115/-3/mcc/1.0",
    "mco": "http://standards.iso.org/iso/19115/-3/mco/1.0",
    "mda": "http://standards.iso.org/iso/19115/-3/mda/2.0",
    "mds": "http://standards.iso.org/iso/19115/-3/mds/2.0",
    "mdt": "http://standards.iso.org/iso/19115/-3/mdt/2.0",
    "mex": "http://standards.iso.org/iso/19115/-3/mex/1.0",
    "mmi": "http://standards.iso.org/iso/19115/-3/mmi/1.0",
    "mpc": "http://standards.iso.org/iso/19115/-3/mpc/1.0",
    "mrc": "http://standards.iso.org/iso/19115/-3/mrc/1.0",
    "mrd": "http://standards.iso.org/iso/19115/-3/mrd/1.0",
    "mri": "http://standards.iso.org/iso/19115/-3/mri/1.0",
    "mrl": "http://standards.iso.org/iso/19115/-3/mrl/2.0",
    "mrs": "http://standards.iso.org/iso/19115/-3/mrs/1.0",
    "msr": "http://standards.iso.org/iso/19115/-3/msr/2.0",
    "mdq": "http://standards.iso.org/iso/19157/-2/mdq/1.0",
    "mac": "http://standards.iso.org/iso/19115/-3/mac/2.0",
    "gco": "http://standards.iso.org/iso/19115/-3/gco/1.0",
    "gml": "http://www.opengis.net/gml/3.2",
    "xlink": "http://www.w3.org/1999/xlink"
  },
  "xpath": "/mdb:MD_Metadata",
  "postprocess": {
    "function": "prune_if_empty"
  },
  "type": "object",
  "properties": {
    "fileIdentifier": {
      "xpath": "mdb:metadataIdentifier/mcc:MD_Identifier/mcc:code",
      "valueChild": "gco:CharacterString",
      "exportTo": {
        "xpath": "mdb:metadataLinkage/cit:CI_OnlineResource/cit:linkage/gco:CharacterString",
        "attributes": {
          "text": {
            "function": "geonetwork_url"
          }
        }
      }
    },
    "attachments": {
      "xpath": "mdb:distributionInfo/mrd:MD_Distribution/mrd:transferOptions/mrd:MD_DigitalTransferOptions/mrd:onLine[cit:CI_OnlineResource[normalize-space(cit:protocol/gco:CharacterString)=\"WWW:DOWNLOAD-1.0-http--download\"][normalize-space(cit:description/gco:CharacterString)=\"Data file\"]]",
      "keep": false,
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "file": {
            "xpath": "cit:CI_OnlineResource/cit:linkage/gco:CharacterString",
            "required": true,
            "xpath_required": true,
            "attributes": {
              "text": {
                "function": "generate_attachment_url"
              }
            }
          },
          "name": {
            "xpath": "cit:CI_OnlineResource/cit:name",
            "required": false,
            "valueChild": "gco:CharacterString"
          }
        }
      }
    },
    "parentMetadata": {
      "!docstring": "ID3",
      "xpath": "mdb:parentMetadata",
      "keep": false,
      "type": "object",
      "rules": [
        {
          "requiredWhenYes": {
            "bool-field": "parentMetadataFlag",
            "opt-field": "record"
          }
        }
      ],
      "properties": {
        "parentMetadataFlag": {
          "type": "boolean"
        },
        "record": {
          "type": "object",
          "xpath": "cit:CI_Citation",
          "properties": {
            "label": {
              "keep": false,
              "xpath": "cit:title/gco:CharacterString"
            },
            "uuid": {},
            "abstract": {},
            "uri": {
              "xpath": "cit:identifier/mcc:MD_Identifier/mcc:code/gco:CharacterString",
              "keep": false
            }
          }
        }
      }
    },
    "referenceSystemInfo": {
      "xpath": "mdb:referenceSystemInfo/mrs:MD_ReferenceSystem/mrs:referenceSystemIdentifier/mcc:MD_Identifier",
      "type": "object",
      "properties": {
        "crsCode": {
          "!docstring": "Where3",
          "xpath": ".",
          "type": "object",
          "properties": {
            "code": {
              "xpath": "mcc:code/gco:CharacterString",
              "type": "string"
            },
            "codeSpace": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "version": {
              "type": "string"
            }
          },
          "rules": ["requiredField"]
        },
        "DateOfDynamicDatum": {
          "!docstring": "Where4",
          "type": "string",
          "xpath": "mcc:version",
          "valueChild": "gco:CharacterString",
          "keep": false,
          "attributes": {
            "text": {
              "function": "date_as_version"
            }
          },
          "rules": ["dateBeforeToday"]
        }
      }
    },
    "identificationInfo": {
      "xpath": "mdb:identificationInfo/mri:MD_DataIdentification",
      "rules": [
        "maintFreq",
        "endPosition",
        "licenseOther",
        {
          "dateOrder": {
            "field0": "beginPosition",
            "field1": "endPosition"
          }
        },
        {
          "requiredWhenYes": {
            "bool-field": "datePublicationFlag",
            "opt-field": "datePublication"
          }
        }
      ],
      "type": "object",
      "properties": {
        "title": {
          "!docstring": "ID1",
          "xpath": "mri:citation/cit:CI_Citation/cit:title",
          "valueChild": "gco:CharacterString",
          "label": "Title",
          "type": "string",
          "keep": false,
          "xpath_required": true,
          "rules": [
            "requiredField"
          ]
        },
        "topicCategory": {
          "!docstring": "ID4",
          "xpath": "mri:topicCategory",
          "keep": false,
          "valueChild": "mri:MD_TopicCategoryCode",
          "label": "Topic categories",
          "attributes": {
            "text": {
              "function": "identity"
            },
            "codeListValue": {
              "function": "identity"
            }
          },
          "rules": [
            "requiredField"
          ]
        },
        "status": {
          "!docstring": "ID5",
          "xpath": "mri:status",
          "valueChild": "mcc:MD_ProgressCode",
          "label": "Status of data",
          "attributes": {
            "text": {
              "function": "identity"
            },
            "codeListValue": {
              "function": "identity"
            }
          },
          "rules": [
            "requiredField"
          ]
        },
        "maintenanceAndUpdateFrequency": {
          "!docstring": "ID9; FIXME: depends on status",
          "xpath": "mri:resourceMaintenance/mmi:MD_MaintenanceInformation/mmi:maintenanceAndUpdateFrequency",
          "valueChild": "mmi:MD_MaintenanceFrequencyCode",
          "label": "Maintenance and update frequency",
          "attributes": {
            "codeListValue": {
              "function": "identity"
            }
          },
          "rules": ["requiredField"]
        },
        "dateCreation": {
          "type": "string",
          "!docstring": "ID6",
          "xpath": "mri:citation/cit:CI_Citation/cit:date/cit:CI_Date[cit:dateType/cit:CI_DateTypeCode[@codeListValue=\"creation\"]]/cit:date",
          "valueChild": "gco:Date",
          "required": true,
          "xpath_required": true,
          "rules": ["requiredField"]
        },
        "datePublicationFlag": {
          "type": "boolean",
          "export": false,
          "xpath": "dummy"
        },
        "datePublication": {
          "type": "string",
          "!docstring": "ID8",
          "xpath": "mri:citation/cit:CI_Citation/cit:date[cit:CI_Date/cit:dateType/cit:CI_DateTypeCode[@codeListValue=\"publication\"]]",
          "valueChild": "cit:CI_Date/cit:date/gco:Date",
          "keep": false,
          "rules": ["requiredField"]
        },
        "version": {
          "type": "string",
          "!docstring": "ID7",
          "xpath": "mri:citation[1]/cit:CI_Citation[1]/cit:edition",
          "valueChild": "gco:CharacterString",
          "label": "Version",
          "keep": false,
          "required": true,
          "xpath_required": true,
          "rules": ["requiredField"]
        },
        "abstract": {
          "!docstring": "What1",
          "xpath": "mri:abstract",
          "valueChild": "gco:CharacterString",
          "label": "Abstract",
          "type": "string",
          "keep": false,
          "required": true,
          "xpath_required": true,
          "rules": ["requiredField"]
        },
        "purpose": {
          "!docstring": "What2",
          "xpath": "mri:purpose",
          "valueChild": "gco:CharacterString",
          "label": "Purpose",
          "type": "string",
          "keep": false,
          "required": false
        },
        "citedResponsibleParty": {
          "!docstring": "Who tab: Responsible for the creation of the dataset",
          "xpath": "mri:citation/cit:CI_Citation/cit:citedResponsibleParty/cit:CI_Responsibility[cit:role/cit:CI_RoleCode[not(@codeListValue=\"publisher\")]]",
          "container": "mri:citation/cit:CI_Citation/cit:citedResponsibleParty[cit:CI_Responsibility/cit:role/cit:CI_RoleCode[not(@codeListValue=\"publisher\")]]",
          "keep": false,
          "type": "array",
          "items": {
            "xpath": "mri:citation/cit:CI_Citation/cit:citedResponsibleParty/cit:CI_Responsibility[cit:role/cit:CI_RoleCode[not(@codeListValue=\"publisher\")]]",
            "type": "object",
            "properties": {
              "role": {
                "!docstring": "Who2 / Who11",
                "xpath": "cit:role/cit:CI_RoleCode",
                "keep": false,
                "type": "object",
                "properties": {
                  "Identifier": {
                    "xpath": ".",
                    "type": "string",
                    "attributes": {
                      "codeListValue": {
                        "function": "identity"
                      }
                    },
                    "parser": {
                      "function": "parse_codeListValue"
                    }
                  },
                  "Description": {
                    "type": "string"
                  },
                  "UUID": {
                    "type": "string"
                  }
                },
                "required": true,
                "xpath_required": true,
                "rules": ["requiredField"]
              },
              "organisation": {
                "xpath": "cit:party/cit:CI_Organisation",
                "type": "object",
                "properties": {
                  "name": {
                    "!docstring": "Who8 / Who12",
                    "xpath": "cit:name",
                    "valueChild": "gco:CharacterString",
                    "required": true,
                    "keep": false,
                    "rules": ["requiredField"]
                  },
                  "uri": {
                    "!docstring": "Who8 / Who9 / Who12",
                    "xpath": "cit:partyIdentifier",
                    "valueChild": "mcc:MD_Identifier/mcc:code/gcx:Anchor",
                    "required": false,
                    "keep": false,
                    "parser": {
                      "function": "parse_organisation_identifier"
                    },
                    "attributes": {
                      "xlink:href": {
                        "function": "separate_organisation_identifier"
                      },
                      "text": {
                        "function": "identity"
                      }
                    }
                  },
                  "full_address_line": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:deliveryPoint[1]",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "street_address": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:deliveryPoint[2]",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "address_locality": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:city",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "address_region": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:administrativeArea",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "postcode": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:postalCode",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "country": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:country",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "email": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:electronicMailAddress",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "isUserDefined": {}
                }
              },
              "contact": {
                "!docstring": "Who3",
                "type": "object",
                "xpath": "cit:party/cit:CI_Organisation/cit:individual",
                "properties": {
                  "name": {
                    "!docstring": "Who3",
                    "xpath": "cit:CI_Individual/cit:name",
                    "valueChild": "gco:CharacterString",
                    "keep": false,
                    "required": false,
                    "rules": ["requiredField"]
                  },
                  "surname": {
                    "!docstring": "Who5",
                    "xpath": "cit:CI_Individual/cit:name",
                    "valueChild": "gco:CharacterString",
                    "keep": false,
                    "export": false
                  },
                  "given_name": {
                    "!docstring": "Who4",
                    "xpath": "cit:CI_Individual/cit:name",
                    "valueChild": "gco:CharacterString",
                    "keep": false,
                    "export": false
                  },
                  "email": {
                    "!docstring": "Who6",
                    "xpath": "cit:CI_Individual/cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:electronicMailAddress",
                    "valueChild": "gco:CharacterString",
                    "keep": false,
                    "required": false
                  },
                  "orcid": {
                    "!docstring": "Who7",
                    "xpath": "cit:CI_Individual/cit:partyIdentifier/mcc:MD_Identifier/mcc:code",
                    "valueChild": "gcx:Anchor",
                    "required": false,
                    "keep": false,
                    "export": false,
                    "parser": {
                      "function": "parse_individual_orcid"
                    },
                    "attributes": {
                      "xlink:href": {
                        "function": "write_orcid"
                      },
                      "xlink:role": {
                        "function": "write_orcid_role"
                      }
                    }
                  },
                  "positionName": {
                    "xpath": "cit:CI_Individual/cit:positionName",
                    "keep": false,
                    "valueChild": "gco:CharacterString",
                    "required": false
                  },
                  "isUserDefined": {}
                }
              },
              "uri": {},
              "partyType": {},
              "isUserDefined": {
                "!docstring": "Fake node so we can track person status",
                "xpath": "isUserAdded",
                "default": false,
                "export": false
              }
            }
          },
          "notes": "Responsible party/ies for creating dataset"
        },
        "pointOfContact": {
          "xpath": "mri:pointOfContact/cit:CI_Responsibility",
          "container": "mri:pointOfContact",
          "keep": false,
          "type": "array",
          "items": {
            "xpath": "mri:pointOfContact/cit:CI_Responsibility",
            "type": "object",
            "properties": {
              "role": {
                "!docstring": "Who2 / Who11",
                "xpath": "cit:role/cit:CI_RoleCode",
                "keep": false,
                "type": "object",
                "properties": {
                  "Identifier": {
                    "xpath": ".",
                    "type": "string",
                    "attributes": {
                      "codeListValue": {
                        "function": "identity"
                      }
                    },
                    "parser": {
                      "function": "parse_codeListValue"
                    }
                  },
                  "Description": {
                    "type": "string"
                  },
                  "UUID": {
                    "type": "string"
                  }
                },
                "required": true,
                "xpath_required": true,
                "rules": ["requiredField"]
              },
              "organisation": {
                "xpath": "cit:party/cit:CI_Organisation",
                "type": "object",
                "properties": {
                  "name": {
                    "!docstring": "Who8 / Who12",
                    "xpath": "cit:name",
                    "valueChild": "gco:CharacterString",
                    "required": true,
                    "keep": false,
                    "rules": ["requiredField"]
                  },
                  "uri": {
                    "!docstring": "Who8 / Who9 / Who12",
                    "xpath": "cit:partyIdentifier",
                    "valueChild": "mcc:MD_Identifier/mcc:code/gcx:Anchor",
                    "required": false,
                    "keep": false,
                    "parser": {
                      "function": "parse_organisation_identifier"
                    },
                    "attributes": {
                      "xlink:href": {
                        "function": "separate_organisation_identifier"
                      },
                      "text": {
                        "function": "identity"
                      }
                    }
                  },
                  "full_address_line": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:deliveryPoint[1]",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "street_address": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:deliveryPoint[2]",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "address_locality": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:city",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "address_region": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:administrativeArea",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "postcode": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:postalCode",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "country": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:country",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "email": {
                    "!docstring": "Who13 / Who14",
                    "xpath": "cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:electronicMailAddress",
                    "keep": false,
                    "valueChild": "gco:CharacterString"
                  },
                  "isUserDefined": {}
                }
              },
              "contact": {
                "!docstring": "Who3",
                "type": "object",
                "xpath": "cit:party/cit:CI_Organisation/cit:individual",
                "properties": {
                  "name": {
                    "!docstring": "Who3",
                    "xpath": "cit:CI_Individual/cit:name",
                    "valueChild": "gco:CharacterString",
                    "keep": false,
                    "required": false,
                    "rules": ["requiredField"]
                  },
                  "surname": {
                    "!docstring": "Who5",
                    "xpath": "cit:CI_Individual/cit:name",
                    "valueChild": "gco:CharacterString",
                    "keep": false,
                    "export": false
                  },
                  "given_name": {
                    "!docstring": "Who4",
                    "xpath": "cit:CI_Individual/cit:name",
                    "valueChild": "gco:CharacterString",
                    "keep": false,
                    "export": false
                  },
                  "email": {
                    "!docstring": "Who6",
                    "xpath": "cit:CI_Individual/cit:contactInfo/cit:CI_Contact/cit:address/cit:CI_Address/cit:electronicMailAddress",
                    "valueChild": "gco:CharacterString",
                    "keep": false,
                    "required": false
                  },
                  "orcid": {
                    "!docstring": "Who7",
                    "xpath": "cit:CI_Individual/cit:partyIdentifier/mcc:MD_Identifier/mcc:code",
                    "valueChild": "gcx:Anchor",
                    "required": false,
                    "keep": false,
                    "export": false,
                    "parser": {
                      "function": "parse_individual_orcid"
                    },
                    "attributes": {
                      "xlink:href": {
                        "function": "write_orcid"
                      },
                      "xlink:role": {
                        "function": "write_orcid_role"
                      }
                    }
                  },
                  "positionName": {
                    "xpath": "cit:CI_Individual/cit:positionName",
                    "keep": false,
                    "valueChild": "gco:CharacterString",
                    "required": false
                  },
                  "isUserDefined": {}
                }
              },
              "uri": {},
              "partyType": {},
              "isUserDefined": {
                "!docstring": "Fake node so we can track person status",
                "xpath": "isUserAdded",
                "default": false,
                "export": false
              }
            }
          }
        },
        "geographicElement": {
          "xpath": "mri:extent/gex:EX_Extent[gex:geographicElement][gex:temporalElement]",
          "type": "object",
          "properties": {
            "siteDescription": {
              "!docstring": "Where1",
              "xpath": "gex:description",
              "valueChild": "gco:CharacterString",
              "label": "Site Description",
              "type": "string",
              "keep": false,
              "required": false
            },
            "boxes": {
              "!docstring": "Where2",
              "xpath": "gex:geographicElement/gex:EX_GeographicBoundingBox",
              "rules": [
                "requiredField"
              ],
              "label": "Geographic coverage",
              "keep": false,
              "type": "array",
              "items": {
                "xpath": "gex:geographicElement/gex:EX_GeographicBoundingBox",
                "type": "object",
                "properties": {
                  "uri": {},
                  "isUserDefined": {},
                  "westBoundLongitude": {
                    "valueChild": "gco:Decimal",
                    "xpath": "gex:westBoundLongitude",
                    "rules": [
                      "requiredField"
                    ],
                    "label": "West limit",
                    "type": "number",
                    "attributes": {
                      "text": {
                        "function": "to_string"
                      }
                    }
                  },
                  "eastBoundLongitude": {
                    "valueChild": "gco:Decimal",
                    "xpath": "gex:eastBoundLongitude",
                    "rules": [
                      "requiredField"
                    ],
                    "label": "East limit",
                    "type": "number",
                    "attributes": {
                      "text": {
                        "function": "to_string"
                      }
                    }
                  },
                  "southBoundLatitude": {
                    "valueChild": "gco:Decimal",
                    "xpath": "gex:southBoundLatitude",
                    "rules": [
                      "requiredField"
                    ],
                    "label": "South limit",
                    "type": "number",
                    "attributes": {
                      "text": {
                        "function": "to_string"
                      }
                    }
                  },
                  "northBoundLatitude": {
                    "valueChild": "gco:Decimal",
                    "xpath": "gex:northBoundLatitude",
                    "rules": [
                      "requiredField"
                    ],
                    "label": "North limit",
                    "type": "number",
                    "attributes": {
                      "text": {
                        "function": "to_string"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "CoordinateReferenceSystem": {
          "type": "object",
          "properties": {
            "uri": {
              "type": "string"
            },
            "label": {
              "type": "string"
            }
          }
        },
        "verticalElement": {
          "xpath": "mri:extent/gex:EX_Extent/gex:verticalElement/gex:EX_VerticalExtent",
          "type": "object",
          "rules": [
            {
              "numericOrder": {
                "field-min": "minimumValue",
                "field-max": "maximumValue"
              }
            },
            {
              "requiredAllNone": {
                "fields-list": [
                  "coordinateReferenceSystem",
                  "minimumValue",
                  "maximumValue"
                ]
              }
            }
          ],
          "properties": {
            "coordinateReferenceSystem": {
              "!docstring": "Where5",
              "xpath": "gex:verticalCRSId/mrs:MD_ReferenceSystem/mrs:referenceSystemIdentifier/mcc:MD_Identifier",
              "type": "object",
              "properties": {
                "code": {
                  "xpath": "mcc:code/gco:CharacterString",
                  "type": "string"
                },
                "codeSpace": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "version": {
                  "type": "string"
                }
              }
            },
            "minimumValue": {
              "!docstring": "Where7",
              "type": "number",
              "xpath": "gex:minimumValue/gco:Real",
              "attributes": {
                "text": {
                  "function": "to_string"
                }
              },
              "parser": {
                "function": "parse_number"
              }
            },
            "maximumValue": {
              "!docstring": "Where8",
              "type": "number",
              "xpath": "gex:maximumValue/gco:Real",
              "attributes": {
                "text": {
                  "function": "to_string"
                }
              },
              "parser": {
                "function": "parse_number"
              }
            }
          }
        },
        "SpatialResolution": {
          "type": "object",
          "xpath": "mri:spatialResolution/mri:MD_Resolution",
          "properties": {
            "ResolutionAttribute": {
              "!docstring": "Where9",
              "type": "string"
            },
            "ResolutionAttributeValue": {
              "!docstring": "Where10",
              "type": "number"
            },
            "ResolutionAttributeUnits": {
              "!docstring": "Derived; depends on the value of Where9",
              "type": "string"
            }
          },
          "export": false,
          "exportTo": {
            "function": "spatial_units_export"
          },
          "rules": ["spatialUnits"]
        },
        "keywordsTheme": {
          "!docstring": "What3",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"theme\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://gcmd.earthdata.nasa.gov/kms/concepts/concept_scheme/sciencekeywords\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "breadcrumb": {},
                  "label": {
                    "xpath": "gcx:Anchor"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true,
          "rules": ["requiredField"]
        },
        "keywordsThemeAnzsrc": {
          "!docstring": "What4",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"theme\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://www.abs.gov.au/statistics/classifications/australian-and-new-zealand-standard-research-classification-anzsrc/2020\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "breadcrumb": {},
                  "label": {
                    "xpath": "gcx:Anchor"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true,
          "rules": ["requiredField"]
        },
        "keywordsPlatform": {
          "!docstring": "What5",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"platform\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://w3id.org/tern/resources/\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "breadcrumb": {},
                  "isUserDefined": {},
                  "userAddedCategory": {
                    "type": "string"
                  },
                  "label": {
                    "type": "string",
                    "rules": ["requiredField"],
                    "xpath": "gcx:Anchor"
                  },
                  "source": {
                    "rules": ["requiredField"],
                    "type": "string"
                  },
                  "description": {
                    "rules": ["requiredField"],
                    "type": "string"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true
        },
        "keywordsInstrument": {
          "!docstring": "What6",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"instrument\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://w3id.org/tern/resources/\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "breadcrumb": {},
                  "serial": {},
                  "isUserDefined": {},
                  "userAddedCategory": {
                    "type": "string"
                  },
                  "label": {
                    "type": "string",
                    "rules": ["requiredField"],
                    "xpath": "gcx:Anchor"
                  },
                  "source": {
                    "rules": ["requiredField"],
                    "type": "string"
                  },
                  "description": {
                    "rules": ["requiredField"],
                    "type": "string"
                  },
                  "serial": {
                    "rules": ["requiredField"],
                    "type": "string"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true
        },
        "keywordsParameters": {
          "!docstring": "What8",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"theme\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"http://linked.data.gov.au/def/tern-cv/5699eca7-9ef0-47a6-bcfb-9306e0e2b85e\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "description": {
                    "rules": ["requiredField"],
                    "type": "string"
                  },
                  "isUserDefined": {
                    "type": "boolean"
                  },
                  "userAddedCategory": {
                    "type": "string"
                  },
                  "symbol": {
                    "rules": ["requiredField"],
                    "type": "string"
                  },
                  "source": {
                    "rules": ["requiredField"],
                    "type": "string"
                  },
                  "unit": {
                    "!docstring": "What9",
                    "xpath": "../../../mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"theme\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"http://www.qudt.org/2.1/vocab/unit\"]/mri:keyword",
                    "type": "object",
                    "properties": {
                      "label": {
                        "xpath": "gcx:Anchor",
                        "rules": ["requiredField"],
                        "type": "string"
                      },
                      "description": {
                        "type": "string"
                      },
                      "uri": {
                        "xpath": "gcx:Anchor",
                        "attributes": {
                          "xlink:href": {
                            "function": "identity"
                          }
                        },
                        "type": "string"
                      },
                      "isUserDefined": {
                        "type": "boolean"
                      }
                    }
                  },
                  "label": {
                    "rules": ["requiredField"],
                    "type": "string",
                    "xpath": "gcx:Anchor"
                  },
                  "uri": {
                    "type": "string",
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true,
          "rules": ["requiredField"]
        },
        "keywordsUoM": {
          "!docstring": "What9",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"theme\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"http://www.qudt.org/2.1/vocab/unit\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "isUserDefined": {},
                  "userAddedCategory": {
                    "type": "string"
                  },
                  "source": {},
                  "label": {
                    "xpath": "gcx:Anchor"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true,
          "rules": ["requiredField"]
        },
        "keywordsTemporal": {
          "!docstring": "What10",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"temporal\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://gcmd.earthdata.nasa.gov/kms/concepts/concept_scheme/temporalresolutionrange/?format=xml\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "object",
              "properties": {
                "breadcrumb": {},
                "label": {
                  "xpath": "gcx:Anchor"
                },
                "uri": {
                  "xpath": "gcx:Anchor",
                  "attributes": {
                    "xlink:href": {
                      "function": "identity"
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true
        },
        "keywordsHorizontal": {
          "!docstring": "What11",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"theme\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://gcmd.earthdata.nasa.gov/kms/concepts/concept_scheme/horizontalresolutionrange/?format=xml\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "object",
              "properties": {
                "breadcrumb": {},
                "label": {
                  "xpath": "gcx:Anchor"
                },
                "uri": {
                  "xpath": "gcx:Anchor",
                  "attributes": {
                    "xlink:href": {
                      "function": "identity"
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true
        },
        "keywordsVertical": {
          "!docstring": "What12",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"theme\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://gcmd.earthdata.nasa.gov/kms/concepts/concept_scheme/verticalresolutionrange/?format=xml\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "object",
              "properties": {
                "label": {
                  "xpath": "gcx:Anchor"
                },
                "uri": {
                  "xpath": "gcx:Anchor",
                  "attributes": {
                    "xlink:href": {
                      "function": "identity"
                    }
                  }
                }
              }
            }
          },
          "required": false
        },
        "keywordsFlora": {
          "!docstring": "What13",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"taxon\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"http://www.cpbr.gov.au/cgi-bin/apni\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "breadcrumb": {},
                  "label": {
                    "xpath": "gcx:Anchor"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true
        },
        "keywordsFauna": {
          "!docstring": "What14",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"taxon\"]][normalize-space(mri:thesaurusName/cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString)=\"https://biodiversity.org.au/afd/home\"]",
          "type": "object",
          "properties": {
            "keywords": {
              "xpath": "mri:keyword",
              "keep": false,
              "type": "array",
              "items": {
                "type": "object",
                "xpath": "mri:keyword",
                "properties": {
                  "breadcrumb": {},
                  "label": {
                    "xpath": "gcx:Anchor"
                  },
                  "uri": {
                    "xpath": "gcx:Anchor",
                    "attributes": {
                      "xlink:href": {
                        "function": "identity"
                      }
                    }
                  }
                }
              }
            }
          },
          "xpath_required": true
        },
        "keywordsAdditional": {
          "!docstring": "What15",
          "xpath": "mri:descriptiveKeywords/mri:MD_Keywords[mri:type/mri:MD_KeywordTypeCode[@codeListValue=\"discipline\"]]",
          "type": "object",
          "properties": {
            "keywords": {
              "keep": false,
              "xpath": "mri:keyword",
              "type": "array",
              "items": {
                "type": "string",
                "keep": "false",
                "xpath": "mri:keyword/gco:CharacterString"
              }
            }
          },
          "xpath_required": true
        },
        "beginPosition": {
          "!docstring": "When1",
          "xpath": "mri:extent/gex:EX_Extent/gex:temporalElement/gex:EX_TemporalExtent/gex:extent/gml:TimePeriod/gml:beginPosition",
          "required": true,
          "xpath_required": true,
          "keep": false,
          "type": "string",
          "rules": ["requiredField"]
        },
        "endPosition": {
          "!docstring": "When2",
          "xpath": "mri:extent/gex:EX_Extent/gex:temporalElement/gex:EX_TemporalExtent/gex:extent/gml:TimePeriod/gml:endPosition",
          "deleteWhenEmpty": false,
          "keep": false,
          "type": "string",
          "rules": ["requiredField"]
        },
        "additionalConstraints": {
          "!docstring": "About1 -- still needs XML mapping",
          "keep": false,
          "type": "object",
          "properties": {
            "constraints": {
              "keep": false,
              "type": "array",
              "items": {
                "type": "string",
                "keep": false
              }
            }
          }
        },
        "securityClassification": {
          "!docstring": "About2",
          "type": "object",
          "properties": {
            "label": {
              "xpath": "gcx:Anchor"
            },
            "uri": {
              "xpath": "gcx:Anchor",
              "attributes": {
                "xlink:href": {
                  "function": "identity"
                }
              }
            }
          },
          "rules": ["requiredField"]
        },
        "environment": {
          "!docstring": "About3",
          "xpath": "mri:environmentDescription",
          "valueChild": "gco:CharacterString",
          "label": "Environmental description",
          "keep": false,
          "required": false,
          "type": "string"
        },
        "supplemental": {
          "!docstring": "About4",
          "xpath": "mri:supplementalInformation",
          "valueChild": "gco:CharacterString",
          "label": "Supplemental Information",
          "keep": false,
          "required": false,
          "type": "string"
        },
        "additionalPublications": {
          "xpath": "mri:additionalDocumentation",
          "keep": false,
          "type": "array",
          "items": {
            "xpath": "mri:additionalDocumentation",
            "keep": false,
            "type": "object",
            "properties": {
              "title": {
                "!docstring": "About5 -- appears in two locations",
                "type": "string",
                "export": true,
                "xpath": "cit:CI_Citation/cit:title/gco:CharacterString",
                "keep": false,
                "exportTo": {
                  "xpath": "cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:name/gco:CharacterString"
                }
              },
              "url": {
                "!docstring": "About6",
                "xpath": "cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString",
                "keep": false,
                "type": "string"
              },
              "uri": {},
              "isUserDefined": {},
              "userAddedCategory": {},
              "duma_path": {}
            }
          }
        },
        "resourceSpecificUsage": {
          "!docstring": "About7",
          "xpath": "mri:resourceSpecificUsage",
          "valueChild": "mri:MD_Usage/mri:specificUsage/gco:CharacterString",
          "label": "Resource specific usage",
          "keep": false,
          "required": false,
          "type": "string"
        },
        "credit": {
          "!docstring": "About8",
          "xpath": "mri:credit[2]",
          "valueChild": "gco:CharacterString",
          "keep": false,
          "required": false,
          "type": "string"
        },
        "customCitation": {
          "!docstring": "About9",
          "xpath": "mri:citation/cit:CI_Citation/cit:otherCitationDetails",
          "valueChild": "gco:CharacterString",
          "label": "Specific citation",
          "keep": false,
          "required": false,
          "type": "string"
        },
        "doi": {
          "!docstring": "Lodge4",
          "xpath": "mri:citation/cit:CI_Citation/cit:identifier/mcc:MD_Identifier/mcc:code",
          "container": "mri:citation/cit:CI_Citation/cit:identifier",
          "keep": false,
          "valueChild": "gco:CharacterString",
          "attributes": {
            "text": {
              "function": "write_doi"
            }
          }
        }
      }
    },
    "resourceLineage": {
      "xpath": "mdb:resourceLineage[1]/mrl:LI_Lineage[mrl:scope/mcc:MD_Scope/mcc:level/mcc:MD_ScopeCode[@codeListValue='dataset']][1]",
      "type": "object",
      "properties": {
        "statement": {
          "!docstring": "How2",
          "type": "string",
          "xpath": "mrl:statement/gco:CharacterString",
          "keep": false,
          "rules": ["requiredField"]
        },
        "onlineMethods": {
          "type": "array",
          "xpath": "mrl:additionalDocumentation",
          "keep": false,
          "items": {
            "type": "object",
            "xpath": "mrl:additionalDocumentation",
            "properties": {
              "isUserDefined": {},
              "userAddedCategory": {
                "keep": false,
                "type": "string"
              },
              "title": {
                "!docstring": "How3",
                "type": "string",
                "keep": false,
                "xpath": "cit:CI_Citation/cit:title/gco:CharacterString",
                "required": true,
                "rules": ["requiredField"]
              },
              "url": {
                "!docstring": "How4",
                "type": "string",
                "keep": false,
                "xpath": "cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage/gco:CharacterString",
                "required": true,
                "rules": ["requiredField"]
              }
            }
          }
        }
      }
    },
    "resourceLineageProcessSteps": {
      "xpath": "mdb:resourceLineage[2]/mrl:LI_Lineage[mrl:processStep][1]",
      "type": "object",
      "properties": {
        "statement": {
          "!docstring": "How6",
          "xpath": "mrl:additionalDocumentation/cit:CI_Citation/cit:title/gco:CharacterString",
          "keep": false,
          "type": "string",
          "required": true,
          "rules": ["requiredField"]
        },
        "summary": {
          "!docstring": "How7",
          "xpath": "mrl:statement/gco:CharacterString",
          "keep": false,
          "type": "string",
          "required": true,
          "rules": ["requiredField"]
        },
        "steps": {
          "!docstring": "How7b",
          "xpath": "mrl:processStep",
          "keep": false,
          "type": "array",
          "items": {
            "xpath": "mrl:processStep/mrl:LI_ProcessStep/mrl:description/gco:CharacterString",
            "keep": false,
            "type": "string",
            "required": true,
            "rules": ["requiredField"]
          }
        }
      }
    },
    "dataQualityInfo": {
      "xpath": "mdb:dataQualityInfo/mdq:DQ_DataQuality/mdq:report/mdq:DQ_QuantitativeAttributeAccuracy",
      "type": "object",
      "properties": {
        "methodSummary": {
          "!docstring": "How8",
          "xpath": "mdq:evaluationMethod/mdq:DQ_EvaluationMethod/mdq:evaluationMethodDescription",
          "valueChild": "gco:CharacterString",
          "label": "Provide a summary of the scope of the Data Quality Assessment",
          "type": "string",
          "keep": false,
          "required": false
        },
        "results": {
          "!docstring": "How12",
          "xpath": "mdq:result/mdq:DQ_DescriptiveResult/mdq:statement/gco:CharacterString",
          "keep": false,
          "required": false,
          "type": "string"
        },
        "onlineMethods": {
          "!docstring": "How9",
          "xpath": "mdq:evaluationMethod/mdq:DQ_EvaluationMethod/mdq:referenceDoc",
          "keep": false,
          "required": false,
          "type": "array",
          "items": {
            "xpath": "mdq:evaluationMethod/mdq:DQ_EvaluationMethod/mdq:referenceDoc",
            "type": "object",
            "properties": {
              "title": {
                "!docstring": "How10",
                "xpath": "cit:CI_Citation/cit:title",
                "valueChild": "gco:CharacterString",
                "type": "string"
              },
              "url": {
                "!docstring": "How11",
                "xpath": "cit:CI_Citation/cit:onlineResource/cit:CI_OnlineResource/cit:linkage",
                "valueChild": "gco:CharacterString",
                "type": "string"
              }
            }
          }
        }
      }
    }
  }
}
